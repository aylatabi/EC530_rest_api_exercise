#USER STORY: As a user, I want to search for adverse food events related to a specific product industry (like vitamins or dairy), so that I can extract and read the types of physical reactions people reported.


import requests

def fetch_adverse_reactions(industry_code, limit=1):
    # The base URL for the FDA Food Adverse Event API
    url = "https://api.fda.gov/food/event.json"
    
    # Setting up our query parameters to search by industry code and limit the results
    params = {
        "search": f"products.industry_code:{industry_code}",
        "limit": limit
    }
    
    # Sending the GET request
    response = requests.get(url, params=params)
    
    # Checking if the request was successful
    if response.status_code == 200:
        data = response.json()
        
        # Extracting the 'reactions' field from the first result in the JSON
        # 'data['results']' is a list, so we grab the first item [0]
        reactions = data['results'][0].get('reactions', [])
        
        print(f"Success! Found these reactions for industry code {industry_code}:")
        for reaction in reactions:
            print(f"- {reaction}")
            
    elif response.status_code == 404:
        print("No results found for that query. Trying handling an empty result!")
    else:
        print(f"Error: {response.status_code}")

# Let's test it using industry code 54 (Vit/Min/Prot/Unconv Diet(Human/Animal))
fetch_adverse_reactions(industry_code=54)
